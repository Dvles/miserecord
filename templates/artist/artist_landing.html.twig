{% extends 'base.html.twig' %}

{% block title %}Artist Landing Page{% endblock %}

{% block body %}
    <div class="container">
        <div class="artists-gallery">
            {% for artist in artists %}
                <div class="artist-item">
                    <div class="artist-photo-wrapper">
                        {% if artist.artistPhotos|length > 0 %}
                            <a href="{{ path('artist_profile', {'artist_id': artist.id}) }}" class="artist-link">
                                <img src="{{ asset(artist.artistPhotos|first.filePath) }}" alt="{{ artist.artistName }}" class="img-fluid artist-img artist-image">
                                <div class="artist-name">{{ artist.artistName }}</div>
                            </a>
                        {% else %}
                            <div class="artist-item">
                                <img src="{{ asset('default_artwork.jpg') }}" alt="No Artist Image" class="img-fluid artist-img artist-image">
                                <div class="artist-name">No Artist Name</div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <!-- GSAP Core and ScrollTrigger Plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM loaded, initializing GSAP animations');

            // GSAP Animations with ScrollTrigger
            gsap.utils.toArray('.artist-item').forEach((item, index) => {
                gsap.fromTo(item, 
                    {
                        scale: gsap.utils.random(0.5, 0.9), // Random initial size
                        opacity: 0, // Start invisible
                        y: 200, // Start from below
                        rotation: gsap.utils.random(-45, 45), // Random rotation
                    },
                    {
                        scale: gsap.utils.random(0.9, 1.5), // Random final size
                        opacity: 1, // Fully visible
                        y: 0, // Move to original position
                        rotation: 0, // Reset rotation
                        scrollTrigger: {
                            trigger: item,
                            start: 'top bottom', // Trigger when the item is at the bottom of the screen
                            end: 'bottom top', // End when the item is at the top of the screen
                            scrub: 1, // Smooth scroll
                            markers: false, // Disable markers, enable for debugging
                        }
                    }
                );
            });

            // Add more interactivity: Zoom & translate as you scroll
            gsap.utils.toArray('.artist-image').forEach(image => {
                gsap.fromTo(image, 
                    {
                        scale: 1,
                        opacity: 0,
                    },
                    {
                        scale: gsap.utils.random(1.1, 1.5), // Random zoom effect
                        opacity: 1,
                        scrollTrigger: {
                            trigger: image,
                            start: 'top 90%', // Trigger when 90% of the image enters the viewport
                            end: 'bottom top', // End when the bottom reaches the top of the screen
                            scrub: 1, // Smooth animation following the scroll
                            markers: false, // You can enable markers for debugging
                        }
                    }
                );
            });
        });
    </script>
{% endblock %}
